---
title: "Base from Member"
#excerpt_separator: "<!--more-->"
categories:
  - C++
tags:
  - C++
---

## 목적
파생(상속받은) 클래스 데이터 멤버의 베이스(상속된) 클래스 초기화

## 원인
C++ 에서, 베이스 클래스는 파생 클래스 멤버보다 먼저 초기화된다. 하지만 베이스 클래스를 초기화에 파생 클래스의 데이터 멤버가 필요할 수 있다.
아래 코드는 Boost 라이브러리에 포함되어 있다. 문제를 살펴보자.

```
#include <streambuf>
#include <ostream>

namespace std {
  class streambuf;
  class ostream {
    explicit ostream(std::streambuf * buf);
    //...
  };
}

// A customization of streambuf.
class fdoutbuf : public std::streambuf
{
public:
    explicit fdoutbuf( int fd );
    //...
};

class fdostream : public std::ostream
{
protected:
    fdoutbuf buf;
public:
    explicit fdostream( int fd )
        : buf( fd ), std::ostream( &buf )
        // This is not allowed: buf can't be initialized before std::ostream.
        // std::ostream needs a std::streambuf object defined inside fdoutbuf.
    {}
};
```
